<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stripe Terminal POS</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.stripe.com/terminal/v1/"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’³ Stripe Terminal POS</h1>
            <div class="connection-status">
                <span id="connectionStatus">Disconnected</span>
                <div class="status-indicator" id="statusIndicator"></div>
            </div>
        </header>

        <!-- Stripe Setup Modal -->
        <div id="stripeSetupModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>ğŸ” Connect to Stripe</h2>
                <p>Enter your Stripe API keys to get started. You can find these in your <a href="https://dashboard.stripe.com/apikeys" target="_blank">Stripe Dashboard</a>.</p>
                
                <div class="setup-form">
                    <div class="input-group">
                        <label for="setupPublishableKey">Publishable Key (pk_live_...)</label>
                        <input type="text" id="setupPublishableKey" placeholder="pk_live_..." autocomplete="off">
                    </div>
                    
                    <div class="input-group">
                        <label for="setupSecretKey">Secret Key (sk_live_...)</label>
                        <input type="password" id="setupSecretKey" placeholder="sk_live_..." autocomplete="off">
                        <small>Your secret key will be stored securely on the server</small>
                    </div>
                    
                    <div class="setup-controls">
                        <button id="saveStripeKeys" class="btn btn-success btn-large">
                            ğŸ’¾ Save & Connect
                        </button>
                        <button id="testStripeKeys" class="btn btn-secondary">
                            ğŸ§ª Test Keys
                        </button>
                    </div>
                    
                    <div id="setupStatus" class="setup-status"></div>
                </div>
            </div>
        </div>

        <main>
            <!-- Terminal Connection Section -->
            <section class="terminal-section">
                <h2>Terminal Connection</h2>
                <div class="terminal-controls">
                    <button id="discoverReaders" class="btn btn-secondary">
                        ğŸ” Discover Readers
                    </button>
                    <button id="connectReader" class="btn btn-primary" disabled>
                        ğŸ”Œ Connect to Reader
                    </button>
                    <button id="disconnectReader" class="btn btn-danger" disabled>
                        âš¡ Disconnect Reader
                    </button>
                </div>
                <div id="readersList" class="readers-list"></div>
                <div id="connectedReader" class="connected-reader"></div>
            </section>

            <!-- Payment Section -->
            <section class="payment-section">
                <h2>Process Payment</h2>
                <div class="payment-form">
                    <div class="input-group">
                        <label for="paymentAmount">Base Amount ($)</label>
                        <input type="number" id="paymentAmount" step="0.01" min="0.01" placeholder="0.00">
                    </div>
                    
                    <div id="feeBreakdown" class="fee-breakdown" style="display: none;">
                        <h3>Payment Breakdown</h3>
                        <div class="fee-line">
                            <span>Base Amount:</span>
                            <span id="baseAmountDisplay">$0.00</span>
                        </div>
                        <div class="fee-line">
                            <span>Processing Fee (2.9% + $0.30):</span>
                            <span id="stripeFeeDisplay">$0.00</span>
                        </div>
                        <div class="fee-line total">
                            <span><strong>Total to Charge:</strong></span>
                            <span id="totalAmountDisplay"><strong>$0.00</strong></span>
                        </div>
                    </div>
                    
                    <div class="payment-controls">
                        <button id="processPayment" class="btn btn-success btn-large" disabled>
                            ğŸ’° Charge Customer
                        </button>
                        <button id="cancelPayment" class="btn btn-danger" disabled>
                            âŒ Cancel Payment
                        </button>
                    </div>
                </div>

                <div id="paymentStatus" class="payment-status"></div>
            </section>

            <!-- Receipt Section -->
            <section class="receipt-section" id="receiptSection" style="display: none;">
                <h2>Receipt</h2>
                <div class="receipt" id="receipt">
                    <!-- Receipt content will be generated here -->
                </div>
                <div class="receipt-controls">
                    <button id="printReceipt" class="btn btn-primary">
                        ğŸ–¨ï¸ Print Receipt
                    </button>
                    <button id="newTransaction" class="btn btn-secondary">
                        ğŸ†• New Transaction
                    </button>
                </div>
            </section>
        </main>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay" style="display: none;">
            <div class="spinner"></div>
            <p id="loadingText">Processing...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>